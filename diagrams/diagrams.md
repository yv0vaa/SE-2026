# Диаграммы системы учёта дефектов

## 1. Диаграмма случаев использования (Use Case Diagram)

```mermaid
graph TB
    subgraph Система учёта дефектов
        UC1[Внесение данных о ремонтных зонах]
        UC2[Внесение данных о ремонтных местах]
        UC3[Внесение данных о ремонтных бригадах]
        UC4[Внесение данных о бригадирах]
        UC5[Регистрация дефекта]
        UC6[Фиксация времени ремонта]
        UC7[Назначение ремонта рабочему]
        UC8[Регистрация рабочего в системе]
        UC9[Просмотр свободных мест]
        UC10[Направление автомобиля в ремонтную зону]
        UC11[Получение сводного отчёта по ремонтам]
        UC12[Получение отчёта о количестве ремонтов]
        UC13[Получение информации по ремонтникам]
        UC14[Получение отчёта по отработанным сменам]
    end
    
    Администратор --> UC1
    Администратор --> UC2
    Администратор --> UC3
    Администратор --> UC4
    
    Ремонтник --> UC5
    Ремонтник --> UC6
    Ремонтник --> UC8
    
    Бригадир --> UC7
    Бригадир --> UC13
    
    Диспетчер --> UC9
    Диспетчер --> UC10
    
    ОтделКонтроляКачества --> UC11
    
    НачальникЦеха --> UC12
    
    Бухгалтерия --> UC14
```

## 2. Диаграмма активностей для регистрации и ремонта дефекта (Activity Diagram)

```mermaid
graph TD
    Start([Автомобиль поступил в ремонтную зону]) --> Диагностика[Выполнение первоначальной диагностики]
    Диагностика --> РегистрацияДефекта[Регистрация дефекта:<br/>- Место дефекта на схеме<br/>- Возможная причина<br/>- Номер автомобиля, дата<br/>- Ремонтник, выполнявший диагностику]
    РегистрацияДефекта --> НазначениеРемонта{Бригадир назначил<br/>ремонт?}
    НазначениеРемонта -->|Нет| ОжиданиеНазначения[Ожидание назначения]
    ОжиданиеНазначения --> НазначениеРемонта
    НазначениеРемонта -->|Да| ФиксацияНачала[Фиксация времени начала ремонта<br/>и ремонтного места]
    ФиксацияНачала --> ВыполнениеРемонта[Выполнение ремонта<br/>рабочим]
    ВыполнениеРемонта --> ФиксацияКонца[Фиксация времени конца ремонта<br/>и рабочего, выполнявшего ремонт]
    ФиксацияКонца --> ВозвратНаКонвейер[Возврат автомобиля<br/>на конвейер/в зону тестирования]
    ВозвратНаКонвейер --> End([Ремонт завершён])
```

## 3. BPMN-диаграмма для всего бизнес-процесса завода

```mermaid
graph TB
    subgraph Дилеры
        D1[Заказ на производство]
    end
    
    subgraph Отдел планирования
        P1[Составление производственного плана]
    end
    
    subgraph Производство
        P2[Сборка кузова]
        P3[Покраска]
        P4[Сборка комплектующих]
    end
    
    subgraph Отдел контроля качества
        Q1[Стендовые испытания]
        Q2[Ходовые испытания]
        Q3[Проверка качества]
    end
    
    subgraph Ремонтная зона
        R1[Обнаружение дефекта]
        R2[Диагностика]
        R3[Регистрация дефекта]
        R4[Ремонт]
        R5[Возврат на конвейер]
    end
    
    subgraph Система учёта дефектов
        S1[Регистрация дефекта]
        S2[Учёт времени ремонта]
        S3[Генерация отчётов]
    end
    
    D1 -->|Заказы| P1
    P1 -->|План| P2
    P2 --> P3
    P3 -->|Кузов| P4
    P4 --> Q1
    Q1 --> Q2
    Q2 --> Q3
    Q3 -->|Дефект обнаружен| R1
    Q3 -->|Успешно| Отгрузка[Отгрузка заказчику]
    R1 --> R2
    R2 --> R3
    R3 --> S1
    R3 --> R4
    R4 --> S2
    R4 --> R5
    R5 -->|Возврат| P4
    R5 -->|Возврат| Q1
    S2 --> S3
    S3 -->|Отчёты| Q1
    S3 -->|Отчёты| Начальник[Начальник цеха]
    S3 -->|Отчёты| Бухгалтерия[Бухгалтерия]
```

## 4. Диаграмма классов (Class Diagram)

```mermaid
classDiagram
    class Автомобиль {
        -String номер
        -String комплектация
        -String цвет
        -Date датаЗапуска
        -Статус статус
    }
    
    class Дефект {
        -int id
        -String местоДефекта
        -String возможнаяПричина
        -Date датаПоступления
        -Date времяНачалаРемонта
        -Date времяКонцаРемонта
        -СтатусДефекта статус
    }
    
    class РемонтнаяЗона {
        -int id
        -String название
        -int участокКонвейера
    }
    
    class РемонтноеМесто {
        -int id
        -СтатусМеста статус
        -boolean свободно
    }
    
    class РемонтнаяБригада {
        -int id
        -String название
        -Смена смена
    }
    
    class Бригадир {
        -int id
        -String ФИО
        -String должность
    }
    
    class Ремонтник {
        -int id
        -String ФИО
        -boolean доступен
        -Date времяРегистрации
    }
    
    class ОтчётПоРемонтам {
        -int id
        -Date датаСмены
        -int общееКоличествоРемонтов
        -double среднееВремяРемонта
        -Map статистикаПоМестамДефекта
    }
    
    class ОтчётПоРемонтнику {
        -int id
        -Date датаСмены
        -int количествоРемонтов
        -double суммарноеВремяРемонта
        -List деталиРемонтов
    }
    
    class ОтчётПоСменам {
        -int id
        -int месяц
        -int год
        -int количествоОтработанныхСмен
    }
    
    class СхемаАвтомобиля {
        -int id
        -String схема
    }
    
    Автомобиль "1" --> "*" Дефект : имеет
    Дефект "1" --> "1" Ремонтник : диагностировал
    Дефект "1" --> "1" Ремонтник : ремонтировал
    Дефект "1" --> "1" РемонтноеМесто : занимает
    Дефект "1" --> "1" СхемаАвтомобиля : место_на_схеме
    РемонтнаяЗона "1" --> "1..6" РемонтноеМесто : содержит
    РемонтнаяЗона "1" --> "1" РемонтнаяБригада : обслуживается
    РемонтнаяБригада "1" --> "1" Бригадир : возглавляется
    РемонтнаяБригада "1" --> "*" Ремонтник : включает
    Бригадир "1" --> "*" Дефект : назначает
    ОтчётПоРемонтам "1" --> "*" Дефект : содержит
    ОтчётПоРемонтнику "1" --> "1" Ремонтник : относится_к
    ОтчётПоСменам "1" --> "1" Ремонтник : относится_к
```

## 5. Диаграмма компонентов (Component Diagram)

```mermaid
graph TB
    subgraph Система учёта дефектов
        subgraph Презентационный слой
            WebUI[Web интерфейс]
            MobileUI[Мобильный интерфейс]
        end
        
        subgraph Слой приложения
            AdminService[Сервис администрирования]
            DefectService[Сервис управления дефектами]
            RepairService[Сервис управления ремонтами]
            ReportService[Сервис отчётов]
            AssignmentService[Сервис назначений]
        end
        
        subgraph Слой бизнес-логики
            DefectManager[Менеджер дефектов]
            RepairManager[Менеджер ремонтов]
            ReportGenerator[Генератор отчётов]
            ZoneManager[Менеджер ремонтных зон]
            WorkerManager[Менеджер рабочих]
        end
        
        subgraph Слой данных
            DefectRepository[Репозиторий дефектов]
            CarRepository[Репозиторий автомобилей]
            ZoneRepository[Репозиторий зон]
            WorkerRepository[Репозиторий рабочих]
            ReportRepository[Репозиторий отчётов]
        end
        
        subgraph Слой персистентности
            Database[(База данных)]
        end
    end
    
    WebUI --> AdminService
    WebUI --> DefectService
    WebUI --> RepairService
    WebUI --> ReportService
    MobileUI --> DefectService
    MobileUI --> RepairService
    
    AdminService --> ZoneManager
    AdminService --> WorkerManager
    DefectService --> DefectManager
    RepairService --> RepairManager
    ReportService --> ReportGenerator
    AssignmentService --> RepairManager
    AssignmentService --> WorkerManager
    
    DefectManager --> DefectRepository
    DefectManager --> CarRepository
    RepairManager --> DefectRepository
    RepairManager --> ZoneRepository
    ReportGenerator --> DefectRepository
    ReportGenerator --> WorkerRepository
    ZoneManager --> ZoneRepository
    WorkerManager --> WorkerRepository
    
    DefectRepository --> Database
    CarRepository --> Database
    ZoneRepository --> Database
    WorkerRepository --> Database
    ReportRepository --> Database
```

## 6. Диаграмма развёртывания (Deployment Diagram)

```mermaid
graph TB
    subgraph Клиентская сеть
        WebBrowser[Веб-браузер]
        MobileDevice[Мобильное устройство]
    end
    
    subgraph DMZ
        LoadBalancer[Балансировщик нагрузки]
    end
    
    subgraph Серверная сеть
        subgraph Веб-сервер 1
            WebServer1[Веб-сервер<br/>Apache/Nginx]
            AppServer1[Сервер приложений<br/>Tomcat/Node.js]
        end
        
        subgraph Веб-сервер 2
            WebServer2[Веб-сервер<br/>Apache/Nginx]
            AppServer2[Сервер приложений<br/>Tomcat/Node.js]
        end
        
        subgraph Сервер БД
            DBServer[(PostgreSQL<br/>Master)]
            DBSlave[(PostgreSQL<br/>Slave)]
        end
        
        subgraph Файловый сервер
            FileServer[Файловое хранилище<br/>для схем автомобилей]
        end
    end
    
    WebBrowser -->|HTTPS| LoadBalancer
    MobileDevice -->|HTTPS| LoadBalancer
    LoadBalancer --> WebServer1
    LoadBalancer --> WebServer2
    WebServer1 --> AppServer1
    WebServer2 --> AppServer2
    AppServer1 --> DBServer
    AppServer2 --> DBServer
    DBServer -->|Репликация| DBSlave
    AppServer1 --> FileServer
    AppServer2 --> FileServer
```

## 7. Диаграмма последовательностей регистрации и ремонта дефекта (Sequence Diagram)

```mermaid
sequenceDiagram
    participant Д как Диспетчер
    participant С как Система
    participant Б как Бригадир
    participant Р как Ремонтник
    participant БД как База данных
    
    Д->>С: Направить автомобиль в ремонтную зону
    С->>БД: Проверить свободные места
    БД-->>С: Список свободных мест
    С-->>Д: Подтверждение направления
    
    Р->>С: Зарегистрироваться в системе
    С->>БД: Сохранить статус доступности
    БД-->>С: Подтверждение
    
    Р->>С: Выполнить диагностику
    Р->>С: Зарегистрировать дефект<br/>(место, причина, номер авто, дата)
    С->>БД: Сохранить дефект
    БД-->>С: ID дефекта
    С-->>Р: Дефект зарегистрирован
    
    Б->>С: Назначить ремонт рабочему
    С->>БД: Обновить назначение дефекта
    БД-->>С: Подтверждение
    С-->>Р: Уведомление о назначении
    
    Р->>С: Зафиксировать начало ремонта<br/>(время, ремонтное место)
    С->>БД: Обновить статус дефекта и места
    БД-->>С: Подтверждение
    
    Р->>С: Зафиксировать конец ремонта<br/>(время, рабочий)
    С->>БД: Обновить статус дефекта
    С->>БД: Освободить ремонтное место
    БД-->>С: Подтверждение
    С-->>Р: Ремонт завершён
    
    С->>БД: Обновить статус автомобиля
    БД-->>С: Подтверждение
    С-->>Д: Автомобиль готов к возврату на конвейер
```
